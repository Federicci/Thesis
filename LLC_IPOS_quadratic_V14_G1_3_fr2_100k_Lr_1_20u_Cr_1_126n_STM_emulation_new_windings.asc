Version 4
SHEET 1 5532 4180
WIRE 3008 -1120 2688 -1120
WIRE 3216 -1120 3088 -1120
WIRE 3232 -1120 3216 -1120
WIRE 848 -1104 752 -1104
WIRE 1152 -1104 848 -1104
WIRE 1296 -1104 1216 -1104
WIRE 1440 -1104 1296 -1104
WIRE 1744 -1104 1616 -1104
WIRE 752 -1072 752 -1104
WIRE 1440 -1072 1440 -1104
WIRE 1616 -1072 1616 -1104
WIRE 1296 -1056 1296 -1104
WIRE 2688 -1056 2688 -1120
WIRE 3232 -1056 3232 -1120
WIRE 752 -960 752 -992
WIRE 1296 -960 1296 -992
WIRE 1440 -960 1440 -992
WIRE 1616 -960 1616 -992
WIRE 2688 -944 2688 -976
WIRE 3232 -928 3232 -992
WIRE 3024 -704 2704 -704
WIRE 3232 -704 3104 -704
WIRE 3248 -704 3232 -704
WIRE 832 -672 736 -672
WIRE 1136 -672 832 -672
WIRE 1280 -672 1200 -672
WIRE 1424 -672 1280 -672
WIRE 1728 -672 1600 -672
WIRE 736 -640 736 -672
WIRE 1424 -640 1424 -672
WIRE 1600 -640 1600 -672
WIRE 2704 -640 2704 -704
WIRE 3248 -640 3248 -704
WIRE 1280 -624 1280 -672
WIRE 736 -528 736 -560
WIRE 1280 -528 1280 -560
WIRE 1424 -528 1424 -560
WIRE 1600 -528 1600 -560
WIRE 2704 -528 2704 -560
WIRE 3248 -512 3248 -576
WIRE -4096 -240 -4272 -240
WIRE -3680 -240 -4096 -240
WIRE -3232 -240 -3680 -240
WIRE -2144 -240 -2272 -240
WIRE -2096 -240 -2144 -240
WIRE -1840 -240 -2016 -240
WIRE -1824 -240 -1840 -240
WIRE -1600 -240 -1760 -240
WIRE -1424 -240 -1600 -240
WIRE -1312 -240 -1424 -240
WIRE -1136 -240 -1232 -240
WIRE -832 -240 -1136 -240
WIRE -384 -240 -832 -240
WIRE -3680 -208 -3680 -240
WIRE -3232 -208 -3232 -240
WIRE -832 -208 -832 -240
WIRE -384 -208 -384 -240
WIRE -1424 -144 -1424 -240
WIRE -736 -128 -832 -128
WIRE -288 -128 -384 -128
WIRE -3680 -112 -3680 -128
WIRE -3584 -112 -3680 -112
WIRE -3232 -112 -3232 -128
WIRE -3136 -112 -3232 -112
WIRE -832 -112 -832 -128
WIRE -736 -112 -736 -128
WIRE -384 -112 -384 -128
WIRE -288 -112 -288 -128
WIRE -3680 -96 -3680 -112
WIRE -3584 -96 -3584 -112
WIRE -3232 -96 -3232 -112
WIRE -3136 -96 -3136 -112
WIRE -2272 -32 -2272 -240
WIRE -976 -32 -992 -32
WIRE -880 -32 -896 -32
WIRE -528 -32 -544 -32
WIRE -432 -32 -448 -32
WIRE 1424 -32 1088 -32
WIRE 1568 -32 1424 -32
WIRE 1696 -32 1568 -32
WIRE 1936 -32 1696 -32
WIRE 1984 -32 1936 -32
WIRE -3824 -16 -3840 -16
WIRE -3728 -16 -3744 -16
WIRE -3376 -16 -3392 -16
WIRE -3280 -16 -3296 -16
WIRE -896 0 -896 -32
WIRE -784 0 -784 -32
WIRE -784 0 -896 0
WIRE -448 0 -448 -32
WIRE -336 0 -336 -32
WIRE -336 0 -448 0
WIRE -3744 16 -3744 -16
WIRE -3632 16 -3632 -16
WIRE -3632 16 -3744 16
WIRE -3296 16 -3296 -16
WIRE -3184 16 -3184 -16
WIRE -3184 16 -3296 16
WIRE -992 16 -992 -32
WIRE -832 16 -832 -16
WIRE -832 16 -992 16
WIRE -736 16 -736 -16
WIRE -736 16 -832 16
WIRE -544 16 -544 -32
WIRE -384 16 -384 -16
WIRE -384 16 -544 16
WIRE -288 16 -288 -16
WIRE -288 16 -384 16
WIRE -3840 32 -3840 -16
WIRE -3680 32 -3680 0
WIRE -3680 32 -3840 32
WIRE -3584 32 -3584 0
WIRE -3584 32 -3680 32
WIRE -3392 32 -3392 -16
WIRE -3232 32 -3232 0
WIRE -3232 32 -3392 32
WIRE -3136 32 -3136 0
WIRE -3136 32 -3232 32
WIRE -3680 48 -3680 32
WIRE -3600 48 -3680 48
WIRE -3088 48 -3600 48
WIRE -2960 48 -3008 48
WIRE -2896 48 -2960 48
WIRE -2752 48 -2816 48
WIRE -2720 48 -2752 48
WIRE -2672 48 -2720 48
WIRE -2544 48 -2672 48
WIRE -2432 48 -2464 48
WIRE 1088 48 1088 -32
WIRE 1424 48 1424 -32
WIRE 1696 48 1696 -32
WIRE -2672 64 -2672 48
WIRE -2432 64 -2432 48
WIRE -2272 96 -2272 48
WIRE -1904 96 -2272 96
WIRE -4272 112 -4272 -240
WIRE -2752 112 -2752 48
WIRE -2272 128 -2272 96
WIRE -832 128 -832 16
WIRE -768 128 -832 128
WIRE -192 128 -768 128
WIRE -32 128 -112 128
WIRE 16 128 -32 128
WIRE 160 128 96 128
WIRE 208 128 160 128
WIRE 272 128 208 128
WIRE 432 128 272 128
WIRE 272 144 272 128
WIRE 432 144 432 128
WIRE -1424 160 -1424 -64
WIRE 656 176 624 176
WIRE 768 176 736 176
WIRE 784 176 768 176
WIRE 1008 176 864 176
WIRE 1088 176 1088 112
WIRE 1088 176 1008 176
WIRE -3680 192 -3680 48
WIRE 160 192 160 128
WIRE 624 208 624 176
WIRE 1696 208 1696 128
WIRE -1424 224 -1424 160
WIRE -832 224 -832 128
WIRE 1936 224 1936 -32
WIRE -3232 240 -3232 32
WIRE -3200 240 -3232 240
WIRE -3120 240 -3200 240
WIRE -2992 240 -3040 240
WIRE -2976 240 -2992 240
WIRE -2896 240 -2912 240
WIRE -2752 240 -2752 192
WIRE -2752 240 -2896 240
WIRE -2672 240 -2672 224
WIRE -2672 240 -2752 240
WIRE -2432 240 -2432 224
WIRE -2432 240 -2672 240
WIRE -2272 240 -2272 208
WIRE -2144 240 -2272 240
WIRE -2096 240 -2144 240
WIRE -1856 240 -2016 240
WIRE -1840 240 -1856 240
WIRE -1600 240 -1600 -240
WIRE -1600 240 -1776 240
WIRE 1696 272 1696 208
WIRE -384 320 -384 16
WIRE -336 320 -384 320
WIRE -304 320 -336 320
WIRE -176 320 -224 320
WIRE -128 320 -176 320
WIRE -48 320 -64 320
WIRE 160 320 160 272
WIRE 160 320 -48 320
WIRE 272 320 272 304
WIRE 272 320 160 320
WIRE 432 320 432 304
WIRE 432 320 272 320
WIRE 624 320 624 288
WIRE 1040 320 624 320
WIRE 1424 320 1424 112
WIRE 1424 320 1040 320
WIRE -384 336 -384 320
WIRE 1088 336 1088 176
WIRE 1424 336 1424 320
WIRE -4608 352 -4784 352
WIRE -3680 352 -3680 272
WIRE -3584 352 -3680 352
WIRE -3232 352 -3232 320
WIRE -3136 352 -3232 352
WIRE -3680 368 -3680 352
WIRE -3584 368 -3584 352
WIRE -3232 368 -3232 352
WIRE -3136 368 -3136 352
WIRE -4608 432 -4608 352
WIRE -4784 448 -4784 352
WIRE -3824 448 -3840 448
WIRE -3728 448 -3744 448
WIRE -3376 448 -3392 448
WIRE -3280 448 -3296 448
WIRE -832 464 -832 304
WIRE -736 464 -832 464
WIRE -384 464 -384 416
WIRE -288 464 -384 464
WIRE -3744 480 -3744 448
WIRE -3632 480 -3632 448
WIRE -3632 480 -3744 480
WIRE -3296 480 -3296 448
WIRE -3184 480 -3184 448
WIRE -3184 480 -3296 480
WIRE -832 480 -832 464
WIRE -736 480 -736 464
WIRE -384 480 -384 464
WIRE -288 480 -288 464
WIRE 1088 480 1088 400
WIRE 1424 480 1424 400
WIRE 1424 480 1088 480
WIRE 1696 480 1696 336
WIRE 1696 480 1424 480
WIRE -3840 496 -3840 448
WIRE -3680 496 -3680 464
WIRE -3680 496 -3840 496
WIRE -3584 496 -3584 464
WIRE -3584 496 -3680 496
WIRE -3392 496 -3392 448
WIRE -3232 496 -3232 464
WIRE -3232 496 -3392 496
WIRE -3136 496 -3136 464
WIRE -3136 496 -3232 496
WIRE -976 560 -992 560
WIRE -880 560 -896 560
WIRE -528 560 -544 560
WIRE -432 560 -448 560
WIRE -896 592 -896 560
WIRE -784 592 -784 560
WIRE -784 592 -896 592
WIRE -448 592 -448 560
WIRE -336 592 -336 560
WIRE -336 592 -448 592
WIRE -4272 608 -4272 192
WIRE -4160 608 -4272 608
WIRE -3680 608 -3680 496
WIRE -3680 608 -4160 608
WIRE -3232 608 -3232 496
WIRE -3232 608 -3680 608
WIRE -992 608 -992 560
WIRE -832 608 -832 576
WIRE -832 608 -992 608
WIRE -736 608 -736 576
WIRE -736 608 -832 608
WIRE -544 608 -544 560
WIRE -384 608 -384 576
WIRE -384 608 -544 608
WIRE -288 608 -288 576
WIRE -288 608 -384 608
WIRE -4784 640 -4784 512
WIRE -4608 640 -4608 512
WIRE -4608 640 -4784 640
WIRE -4784 672 -4784 640
WIRE -4096 672 -4096 -240
WIRE -2496 672 -4096 672
WIRE -1904 672 -1904 96
WIRE -1904 672 -2416 672
WIRE -1424 672 -1424 288
WIRE -1424 672 -1904 672
WIRE -1136 672 -1136 -240
WIRE 1200 672 -1136 672
WIRE 1424 672 1424 480
WIRE 1424 672 1280 672
WIRE -4272 704 -4272 608
WIRE -4160 720 -4160 608
WIRE -832 720 -832 608
WIRE -832 720 -4160 720
WIRE -384 720 -384 608
WIRE -384 720 -832 720
WIRE 1936 720 1936 304
WIRE 1936 720 -384 720
WIRE -4320 1600 -4320 1568
WIRE -4000 1600 -4000 1568
WIRE -3696 1600 -3696 1568
WIRE -3376 1600 -3376 1568
WIRE 64 1600 64 1568
WIRE 384 1600 384 1568
WIRE 1328 1600 1328 1568
WIRE -2352 1616 -2352 1584
WIRE -1840 1616 -1840 1584
WIRE -1488 1616 -1488 1584
WIRE -1152 1616 -1152 1584
WIRE -816 1616 -816 1584
WIRE -4320 1744 -4320 1680
WIRE -4000 1744 -4000 1680
WIRE -3696 1744 -3696 1680
WIRE -3376 1744 -3376 1680
WIRE 64 1744 64 1680
WIRE 384 1744 384 1680
WIRE 1328 1744 1328 1680
WIRE -2352 1760 -2352 1696
WIRE -1840 1760 -1840 1696
WIRE -1488 1760 -1488 1696
WIRE -1152 1760 -1152 1696
WIRE -816 1760 -816 1696
WIRE -1520 2240 -1520 2208
WIRE -1168 2240 -1168 2208
WIRE -816 2240 -816 2208
WIRE 64 2240 64 2208
WIRE 384 2240 384 2208
WIRE 688 2240 688 2208
WIRE 1008 2240 1008 2208
WIRE 1328 2240 1328 2208
WIRE -4320 2256 -4320 2224
WIRE -4000 2256 -4000 2224
WIRE -3696 2256 -3696 2224
WIRE -3376 2256 -3376 2224
WIRE -2352 2256 -2352 2224
WIRE -1520 2384 -1520 2320
WIRE -1168 2384 -1168 2320
WIRE -816 2384 -816 2320
WIRE 64 2384 64 2320
WIRE 384 2384 384 2320
WIRE 688 2384 688 2320
WIRE 1008 2384 1008 2320
WIRE 1328 2384 1328 2320
WIRE -4320 2400 -4320 2336
WIRE -4000 2400 -4000 2336
WIRE -3696 2400 -3696 2336
WIRE -3376 2400 -3376 2336
WIRE -2352 2400 -2352 2336
WIRE 160 3008 160 2976
WIRE 1280 3008 1280 2976
WIRE 160 3152 160 3088
WIRE 1280 3152 1280 3088
WIRE 160 3312 160 3280
WIRE 1280 3312 1280 3280
WIRE 160 3456 160 3392
WIRE 1280 3456 1280 3392
WIRE 160 3616 160 3584
WIRE 1280 3616 1280 3584
WIRE 160 3760 160 3696
WIRE 1280 3760 1280 3696
WIRE 160 3904 160 3872
WIRE 160 4048 160 3984
FLAG -4272 704 0
FLAG 1984 -32 out
IOPIN 1984 -32 Out
FLAG 160 3152 0
FLAG 160 2976 Pout
FLAG 1280 3152 0
FLAG 1280 2976 Pin
FLAG -4272 -240 in
IOPIN -4272 -240 In
FLAG -4784 672 0
FLAG -4320 1744 0
FLAG -4320 1568 PT1
FLAG -3200 240 V4
FLAG -2720 48 V3
FLAG -2896 240 V6
FLAG -1840 -240 V9
FLAG -1856 240 V10
FLAG -1424 -240 V11
FLAG -1424 160 V12
FLAG -768 128 V13
FLAG -336 320 V16
FLAG -2992 240 V5
FLAG 208 128 V15
FLAG -48 320 V18
FLAG -176 320 V17
FLAG 624 176 V19
FLAG 1040 320 V22
FLAG 1568 -32 V23
FLAG 1696 208 V24
FLAG -3600 48 V1
FLAG -4000 1744 0
FLAG -4000 1568 PT2
FLAG -3696 1744 0
FLAG -3696 1568 PT3
FLAG -3376 1744 0
FLAG -3376 1568 PT4
FLAG -2352 1760 0
FLAG -2352 1584 PCr1
FLAG 64 1744 0
FLAG 64 1568 PD1
FLAG 384 1744 0
FLAG 384 1568 PD2
FLAG 1328 1744 0
FLAG 1328 1568 PClink
FLAG -4320 2400 0
FLAG -4320 2224 PT5
FLAG -4000 2400 0
FLAG -4000 2224 PT6
FLAG -3696 2400 0
FLAG -3696 2224 PT7
FLAG -3376 2400 0
FLAG -3376 2224 PT8
FLAG -2352 2400 0
FLAG -2352 2224 PCr2
FLAG 64 2384 0
FLAG 64 2208 PD3
FLAG 384 2384 0
FLAG 384 2208 PD4
FLAG 688 2384 0
FLAG 688 2208 PD5
FLAG 1008 2384 0
FLAG 1008 2208 PD6
FLAG 1328 2384 0
FLAG 1328 2208 PCout
FLAG 160 3456 0
FLAG 160 3280 PDP1
FLAG 1280 3456 0
FLAG 1280 3280 PDP2
FLAG 160 3760 0
FLAG 160 3584 PoutStg1
FLAG 1280 3760 0
FLAG 1280 3584 PoutStg2
FLAG 160 4048 0
FLAG 160 3872 PLink
FLAG -2960 48 V2
FLAG -2144 -240 V7
FLAG -2144 240 V8
FLAG -32 128 V14
FLAG 768 176 V20
FLAG 1008 176 V21
FLAG -1840 1760 0
FLAG -1840 1584 PRs11
FLAG -1488 1760 0
FLAG -1488 1584 PRs12
FLAG -1152 1760 0
FLAG -1152 1584 PRs13
FLAG -816 1760 0
FLAG -816 1584 PRc1
FLAG -1520 2384 0
FLAG -1520 2208 PRs21
FLAG -1168 2384 0
FLAG -1168 2208 PRs22
FLAG -816 2384 0
FLAG -816 2208 PRc2
FLAG 1616 -960 0
FLAG 1744 -1104 Pc1
FLAG 752 -960 0
FLAG 848 -1104 B1
FLAG 1296 -960 0
FLAG 1440 -960 0
FLAG 1440 -1104 B1max
FLAG 1600 -528 0
FLAG 1728 -672 Pc2
FLAG 736 -528 0
FLAG 832 -672 B2
FLAG 1280 -528 0
FLAG 1424 -528 0
FLAG 1424 -672 B2max
FLAG 2688 -944 0
FLAG 3216 -1120 Rc1
FLAG 3232 -928 0
FLAG 2704 -528 0
FLAG 3232 -704 Rc2
FLAG 3248 -512 0
SYMBOL nmos -880 480 R0
SYMATTR InstName T6
SYMATTR Value IPI320N20N3_L0
SYMATTR Prefix X
SYMBOL voltage -880 560 R90
WINDOW 123 0 0 Left 0
WINDOW 39 -32 28 VRight 2
WINDOW 3 183 -202 VRight 2
WINDOW 0 -60 28 VRight 2
SYMATTR SpiceLine Rser=3
SYMATTR Value PULSE(0 12 0 1n 1n {TON_2} {T_2})
SYMATTR InstName Vgs6
SYMBOL voltage -4272 96 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vin
SYMATTR Value 36.5
SYMBOL res 1920 208 R0
SYMATTR InstName Rload
SYMATTR Value 300
SYMBOL cap -64 304 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
WINDOW 39 60 32 VTop 2
SYMATTR InstName Cr2
SYMATTR Value 270n
SYMATTR SpiceLine IC=0
SYMBOL diode 1104 112 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D3
SYMATTR Value STTH30R04DY
SYMBOL nmos -880 -112 R0
SYMATTR InstName T5
SYMATTR Value IPI320N20N3_L0
SYMATTR Prefix X
SYMBOL nmos -432 -112 R0
SYMATTR InstName T7
SYMATTR Value IPI320N20N3_L0
SYMATTR Prefix X
SYMBOL nmos -432 480 R0
SYMATTR InstName T8
SYMATTR Value IPI320N20N3_L0
SYMATTR Prefix X
SYMBOL ind2 640 192 M0
WINDOW 39 -58 83 Left 2
WINDOW 0 -89 108 Left 2
WINDOW 3 -79 61 Left 2
SYMATTR SpiceLine IC=0
SYMATTR InstName Lideal22
SYMATTR Value 2.041
SYMATTR Type ind
SYMBOL ind2 416 208 R0
WINDOW 39 39 93 Left 2
WINDOW 3 46 69 Left 2
SYMATTR SpiceLine IC=0
SYMATTR Value 1
SYMATTR InstName Lideal21
SYMATTR Type ind
SYMBOL voltage -432 -32 R90
WINDOW 123 0 0 Left 0
WINDOW 39 -30 37 VRight 2
WINDOW 3 -236 -374 VRight 2
WINDOW 0 -58 37 VRight 2
SYMATTR SpiceLine Rser=3
SYMATTR Value PULSE(0 12 0 1n 1n {TON_2} {T_2})
SYMATTR InstName Vgs7
SYMBOL voltage -880 -32 R90
WINDOW 123 0 0 Left 0
WINDOW 39 -24 32 VRight 2
WINDOW 3 -237 -325 VRight 2
WINDOW 0 -52 32 VRight 2
SYMATTR SpiceLine Rser=3
SYMATTR Value PULSE(0 12 {TDelay_2} 1n 1n {TON_2} {T_2})
SYMATTR InstName Vgs5
SYMBOL voltage -432 560 R90
WINDOW 123 0 0 Left 0
WINDOW 39 -30 35 VRight 2
WINDOW 3 187 -433 VRight 2
WINDOW 0 -58 35 VRight 2
SYMATTR SpiceLine Rser=3
SYMATTR Value PULSE(0 12 {TDelay_2} 1n 1n {TON_2} {T_2})
SYMATTR InstName Vgs8
SYMBOL diode 1440 112 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D5
SYMATTR Value STTH30R04DY
SYMBOL diode 1104 400 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D4
SYMATTR Value STTH30R04DY
SYMBOL diode 1440 400 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D6
SYMATTR Value STTH30R04DY
SYMBOL cap 1680 272 R0
WINDOW 39 24 84 Left 2
SYMATTR SpiceLine IC=0
SYMATTR InstName Cout
SYMATTR Value 4.7µ
SYMBOL bv 160 2992 R0
SYMATTR InstName B1
SYMATTR Value V=V(out)*I(Rload)
SYMBOL bv 1280 2992 R0
SYMATTR InstName B2
SYMATTR Value V=V(in)*I(Vin)
SYMBOL nmos -3728 368 R0
SYMATTR InstName T2
SYMATTR Value ISZ080N10NM6_L0
SYMATTR Prefix X
SYMBOL voltage -3728 448 R90
WINDOW 123 0 0 Left 0
WINDOW 39 -21 27 VRight 2
WINDOW 3 298 -131 VRight 2
WINDOW 0 -49 27 VRight 2
SYMATTR SpiceLine Rser=3
SYMATTR Value PULSE(0 15 0 1n 1n {TON_1} {T_1})
SYMATTR InstName Vgs2
SYMBOL cap -2912 224 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
WINDOW 39 60 32 VTop 2
SYMATTR InstName Cr1
SYMATTR Value 224n
SYMATTR SpiceLine IC=0
SYMBOL nmos -3728 -96 R0
SYMATTR InstName T1
SYMATTR Value ISZ080N10NM6_L0
SYMATTR Prefix X
SYMBOL nmos -3280 -96 R0
SYMATTR InstName T3
SYMATTR Value ISZ080N10NM6_L0
SYMATTR Prefix X
SYMBOL nmos -3280 368 R0
SYMATTR InstName T4
SYMATTR Value ISZ080N10NM6_L0
SYMATTR Prefix X
SYMBOL voltage -3280 -16 R90
WINDOW 123 0 0 Left 0
WINDOW 39 -27 27 VRight 2
WINDOW 3 -255 -443 VRight 2
WINDOW 0 -55 27 VRight 2
SYMATTR SpiceLine Rser=3
SYMATTR Value PULSE(0 15 0 1n 1n {TON_1*FB_mode} {T_1})
SYMATTR InstName Vgs3
SYMBOL voltage -3728 -16 R90
WINDOW 123 0 0 Left 0
WINDOW 39 -22 28 VRight 2
WINDOW 3 -259 -289 VRight 2
WINDOW 0 -50 28 VRight 2
SYMATTR SpiceLine Rser=3
SYMATTR Value PULSE(0 15 {TDelay_1} 1n 1n {TON_1} {T_1})
SYMATTR InstName Vgs1
SYMBOL voltage -3280 448 R90
WINDOW 123 0 0 Left 0
WINDOW 39 -22 31 VRight 2
WINDOW 3 296 -595 VRight 2
WINDOW 0 -50 31 VRight 2
SYMATTR SpiceLine Rser=3
SYMATTR Value PULSE(0 15 {TDelay_1} 1n 1n {TON_1*FB_mode+T_1*HB_mode} {T_1})
SYMATTR InstName Vgs4
SYMBOL cap -1440 224 R0
WINDOW 39 24 84 Left 2
SYMATTR SpiceLine IC=0
SYMATTR InstName Clink
SYMATTR Value 33µ
SYMBOL diode -4800 448 R0
SYMATTR InstName D9
SYMATTR Value ID
SYMBOL current -4608 512 R180
WINDOW 0 24 80 Left 2
WINDOW 3 24 0 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName I1
SYMATTR Value 25
SYMBOL res -1440 -160 R0
SYMATTR InstName ESR_Clink
SYMATTR Value 2m
SYMBOL res 1680 32 R0
SYMATTR InstName ESR_Cout
SYMATTR Value 10m
SYMBOL res -3024 224 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName ESR_Cr1
SYMATTR Value 5m
SYMBOL res -208 304 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName ESR_Cr2
SYMATTR Value 9m
SYMBOL bv -4320 1584 R0
SYMATTR InstName B4
SYMATTR Value V=I(MeasID1)*V(in,V1)
SYMBOL voltage -3680 -224 R0
WINDOW 123 0 0 Left 0
WINDOW 39 30 76 Left 2
SYMATTR SpiceLine Rser=0
SYMATTR InstName MeasID1
SYMATTR Value 0
SYMBOL voltage -3680 176 R0
WINDOW 123 0 0 Left 0
WINDOW 39 30 76 Left 2
SYMATTR SpiceLine Rser=0
SYMATTR InstName MeasID2
SYMATTR Value 0
SYMBOL voltage -3232 -224 R0
WINDOW 123 0 0 Left 0
WINDOW 39 30 76 Left 2
SYMATTR SpiceLine Rser=0
SYMATTR InstName MeasID3
SYMATTR Value 0
SYMBOL voltage -3232 224 R0
WINDOW 0 -118 12 Left 2
WINDOW 3 -60 71 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 -123 41 Left 2
SYMATTR InstName MeasID4
SYMATTR Value 0
SYMATTR SpiceLine Rser=0
SYMBOL voltage -832 -224 R0
WINDOW 0 28 12 Left 2
WINDOW 3 38 73 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 35 40 Left 2
SYMATTR InstName MeasID5
SYMATTR Value 0
SYMATTR SpiceLine Rser=0
SYMBOL voltage -832 208 R0
WINDOW 0 28 12 Left 2
WINDOW 3 38 73 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 35 40 Left 2
SYMATTR InstName MeasID6
SYMATTR Value 0
SYMATTR SpiceLine Rser=0
SYMBOL voltage -384 -224 R0
WINDOW 0 28 12 Left 2
WINDOW 3 38 73 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 35 40 Left 2
SYMATTR InstName MeasID7
SYMATTR Value 0
SYMATTR SpiceLine Rser=0
SYMBOL voltage -384 320 R0
WINDOW 0 28 12 Left 2
WINDOW 3 38 73 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 35 40 Left 2
SYMATTR InstName MeasID8
SYMATTR Value 0
SYMATTR SpiceLine Rser=0
SYMBOL bv -4000 1584 R0
SYMATTR InstName B5
SYMATTR Value V=I(MeasID2)*V(V1)
SYMBOL bv -3696 1584 R0
SYMATTR InstName B6
SYMATTR Value V=I(MeasID3)*V(in,V4)
SYMBOL bv -3376 1584 R0
SYMATTR InstName B7
SYMATTR Value V=I(MeasID4)*V(V4)
SYMBOL bv -2352 1600 R0
SYMATTR InstName B8
SYMATTR Value V=I(ESR_Cr1)*V(V5,V4)
SYMBOL bv 64 1584 R0
SYMATTR InstName B9
SYMATTR Value V=I(D1)*V(V9,V11)
SYMBOL bv 384 1584 R0
SYMATTR InstName B10
SYMATTR Value V=I(D2)*V(V10,V11)
SYMBOL bv 1328 1584 R0
SYMATTR InstName B13
SYMATTR Value V=I(ESR_Clink)*V(V11,V12)
SYMBOL bv -4320 2240 R0
SYMATTR InstName B14
SYMATTR Value V=I(MeasID5)*V(V11,V13)
SYMBOL bv -4000 2240 R0
SYMATTR InstName B15
SYMATTR Value V=I(MeasID6)*V(V13)
SYMBOL bv -3696 2240 R0
WINDOW 3 11 96 Left 2
SYMATTR Value V=I(MeasID7)*V(V11,V16)
SYMATTR InstName B16
SYMBOL bv -3376 2240 R0
SYMATTR InstName B17
SYMATTR Value V=I(MeasID8)*V(V16)
SYMBOL bv -2352 2240 R0
SYMATTR InstName B18
SYMATTR Value V=I(ESR_Cr2)*V(V17,V16)
SYMBOL bv 64 2224 R0
SYMATTR InstName B19
SYMATTR Value V=I(D3)*V(V21,V23)
SYMBOL bv 384 2224 R0
SYMATTR InstName B20
SYMATTR Value V=I(D4)*V(V11,V21)
SYMBOL bv 688 2224 R0
SYMATTR InstName B21
SYMATTR Value V=I(D5)*V(V22,V23)
SYMBOL bv 1008 2224 R0
SYMATTR InstName B22
SYMATTR Value V=I(D6)*V(V11,V22)
SYMBOL bv 1328 2224 R0
SYMATTR InstName B23
SYMATTR Value V=I(ESR_Cout)*V(V23,V24)
SYMBOL diode -1824 -224 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value STTH30R04DY
SYMBOL diode -1840 256 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D2
SYMATTR Value STTH30R04DY
SYMBOL voltage -2512 672 R270
WINDOW 0 52 14 VRight 2
WINDOW 3 -60 71 Invisible 2
SYMATTR InstName MeasIDP1
SYMATTR Value 0
SYMATTR SpiceLine Rser=0
SYMBOL voltage 1184 672 R270
WINDOW 0 52 14 VRight 2
WINDOW 3 -60 71 Invisible 2
SYMATTR InstName MeasIDP2
SYMATTR Value 0
SYMATTR SpiceLine Rser=0
SYMBOL bv 160 3296 R0
SYMATTR InstName B3
SYMATTR Value V=V(in)*I(MeasIDP1)
SYMBOL bv 1280 3296 R0
SYMATTR InstName B11
SYMATTR Value V=V(V11)*I(MeasIDP2)
SYMBOL bv 160 3600 R0
SYMATTR InstName B12
SYMATTR Value V=V(V11,in)*I(MeasIDP1)
SYMBOL bv 1280 3600 R0
SYMATTR InstName B24
SYMATTR Value V=V(V23,V11)*I(MeasIDP2)
SYMBOL voltage -1328 -240 R270
WINDOW 0 -51 2 VRight 2
WINDOW 3 -60 71 Invisible 2
SYMATTR InstName MeasILink
SYMATTR Value 0
SYMATTR SpiceLine Rser=0
SYMBOL bv 160 3888 R0
SYMATTR InstName B25
SYMATTR Value V=V(V11)*I(MeasILink)
SYMBOL ind -2912 64 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
WINDOW 39 -23 56 VBottom 2
SYMATTR InstName Lk11
SYMATTR Value 5.58µ
SYMATTR SpiceLine IC=0
SYMBOL ind -2688 128 R0
WINDOW 3 36 65 Left 2
WINDOW 39 38 88 Left 2
SYMATTR Value 61.92µ
SYMATTR SpiceLine IC=0
SYMATTR InstName Lm1
SYMBOL res -2688 48 R0
SYMATTR InstName Raux1
SYMATTR Value 0.0001m
SYMBOL ind -2560 64 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
WINDOW 39 -23 56 VBottom 2
SYMATTR InstName Lk21ref
SYMATTR Value 5.58µ
SYMATTR SpiceLine IC=0
SYMBOL res -2448 48 R0
SYMATTR InstName Raux2
SYMATTR Value 0.0001m
SYMBOL ind2 -2448 128 R0
WINDOW 39 36 108 Left 2
SYMATTR SpiceLine IC=0
SYMATTR InstName Lideal11
SYMATTR Value 1
SYMATTR Type ind
SYMBOL ind2 -2288 -48 R0
WINDOW 39 36 108 Left 2
SYMATTR SpiceLine IC=0
SYMATTR InstName Lideal12
SYMATTR Value 7.37
SYMATTR Type ind
SYMBOL ind2 -2288 112 R0
WINDOW 39 36 108 Left 2
SYMATTR SpiceLine IC=0
SYMATTR InstName Lideal13
SYMATTR Value 7.37
SYMATTR Type ind
SYMBOL ind 0 144 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
WINDOW 39 -23 56 VBottom 2
SYMATTR InstName Lk12
SYMATTR Value 4.845µ
SYMATTR SpiceLine IC=0
SYMBOL ind2 256 208 R0
WINDOW 39 39 93 Left 2
WINDOW 3 46 69 Left 2
SYMATTR SpiceLine IC=0
SYMATTR Value 126.45µ
SYMATTR InstName Lm2
SYMATTR Type ind
SYMBOL res 256 128 R0
SYMATTR InstName Raux3
SYMATTR Value 0.0001m
SYMBOL res 416 128 R0
SYMATTR InstName Raux4
SYMATTR Value 0.0001m
SYMBOL ind 640 192 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
WINDOW 39 -17 56 VBottom 2
SYMATTR InstName Lk22
SYMATTR Value 9.89µ
SYMATTR SpiceLine IC=0
SYMBOL res -2992 32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rs11
SYMATTR Value {R_dc1_1*k11}
SYMBOL res -2000 -256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rs12
SYMATTR Value {R_dc2_1*k12}
SYMBOL res -2000 224 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rs13
SYMATTR Value {R_dc2_1*k12}
SYMBOL res 880 160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rs22
SYMATTR Value {R_dc2_2*k22}
SYMBOL res -2768 96 R0
WINDOW 3 -104 55 Left 2
SYMATTR Value R=V(Rc1)
SYMATTR InstName Rc1
SYMBOL res 144 176 R0
WINDOW 3 -111 67 Left 2
SYMATTR Value R=V(Rc2)
SYMATTR InstName Rc2
SYMBOL res -96 112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rs21
SYMATTR Value {R_dc1_2*k21}
SYMBOL bv -1840 1600 R0
SYMATTR InstName B26
SYMATTR Value V=I(Rs11)*V(V2,V1)
SYMBOL bv -1488 1600 R0
SYMATTR InstName B27
SYMATTR Value V=I(Rs12)*V(V9,V7)
SYMBOL bv -1152 1600 R0
SYMATTR InstName B28
SYMATTR Value V=I(Rs13)*V(V10,V8)
SYMBOL bv -816 1600 R0
SYMATTR InstName B29
SYMATTR Value V=V(Pc1)
SYMBOL bv -1520 2224 R0
SYMATTR InstName B30
SYMATTR Value V=I(Rs21)*V(V14,V13)
SYMBOL bv -1168 2224 R0
SYMATTR InstName B31
SYMATTR Value V=I(Rs22)*V(V21,V20)
SYMBOL bv -816 2224 R0
SYMATTR InstName B33
SYMATTR Value V=V(Pc2)
SYMBOL bv 1616 -1088 R0
SYMATTR InstName B34
SYMATTR Value V={Vol1*pvsin1}*{(fsw_1/fb1)**alpha1}*(V(B1max)/{Bm1})**{beta1}
SYMBOL bv 752 -1088 R0
SYMATTR InstName B37
SYMATTR Value V=idt(V(V3,V6))*{1/(N1_1*AreaCore1)}
SYMBOL diode 1152 -1088 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D7
SYMATTR Value ID
SYMBOL cap 1280 -1056 R0
SYMATTR InstName C1
SYMATTR Value 0.1µ
SYMBOL res 1424 -1088 R0
SYMATTR InstName R1
SYMATTR Value 1k
SYMBOL bv 1600 -656 R0
SYMATTR InstName B32
SYMATTR Value V={Vol2*pvsin2}*{(fsw_2/fb2)**alpha2}*(V(B2max)/{Bm2})**{beta2}
SYMBOL bv 736 -656 R0
SYMATTR InstName B35
SYMATTR Value V=idt(V(V15,V18))*{1/(N2_1*AreaCore2)}
SYMBOL diode 1136 -656 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D8
SYMATTR Value ID
SYMBOL cap 1264 -624 R0
SYMATTR InstName C2
SYMATTR Value 0.1µ
SYMBOL res 1408 -656 R0
SYMATTR InstName R2
SYMATTR Value 1k
SYMBOL bv 2688 -1072 R0
SYMATTR InstName B36
SYMATTR Value V=if(time<3m,5k,V(V3,V6)**2/V(Pc1))
SYMBOL res 3104 -1136 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 2k
SYMBOL cap 3216 -1056 R0
SYMATTR InstName C3
SYMATTR Value 5µ
SYMBOL bv 2704 -656 R0
SYMATTR InstName B38
SYMATTR Value V=if(time<3m,5k,V(V15,V18)**2/V(Pc2))
SYMBOL res 3120 -720 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 2k
SYMBOL cap 3232 -640 R0
SYMATTR InstName C4
SYMATTR Value 5µ
SYMBOL nmos -3632 -96 R0
WINDOW 3 56 72 Invisible 2
SYMATTR Value ISZ080N10NM6_L0
SYMATTR InstName Taux_1
SYMATTR Prefix X
SYMBOL nmos -3184 -96 R0
WINDOW 3 56 72 Invisible 2
SYMATTR Value ISZ080N10NM6_L0
SYMATTR InstName Taux_3
SYMATTR Prefix X
SYMBOL nmos -3632 368 R0
WINDOW 3 56 72 Invisible 2
SYMATTR Value ISZ080N10NM6_L0
SYMATTR InstName Taux_2
SYMATTR Prefix X
SYMBOL nmos -3184 368 R0
WINDOW 3 56 72 Invisible 2
SYMATTR Value ISZ080N10NM6_L0
SYMATTR InstName Taux_4
SYMATTR Prefix X
SYMBOL nmos -784 -112 R0
WINDOW 3 56 72 Invisible 2
SYMATTR Value IPI320N20N3_L0
SYMATTR InstName Taux_5
SYMATTR Prefix X
SYMBOL nmos -336 -112 R0
WINDOW 3 56 72 Invisible 2
SYMATTR Value IPI320N20N3_L0
SYMATTR InstName Taux_7
SYMATTR Prefix X
SYMBOL nmos -784 480 R0
WINDOW 3 56 72 Invisible 2
SYMATTR Value IPI320N20N3_L0
SYMATTR InstName Taux_6
SYMATTR Prefix X
SYMBOL nmos -336 480 R0
WINDOW 3 56 72 Invisible 2
SYMATTR Value IPI320N20N3_L0
SYMATTR InstName Taux_8
SYMATTR Prefix X
TEXT -4728 1208 Left 2 !.inc C:\\Users\\feder\\Documents\\LTspice\\OptiMOS3_200V_LTSpice.lib
TEXT -4728 1248 Left 2 !.inc C:\\Users\\feder\\Documents\\LTspice\\OptiMOS6_100V_LTSpice.lib
TEXT 392 360 Left 2 !K2 Lideal21 Lideal22 1
TEXT -3336 912 Left 2 !.param fsw_1=102.8k
TEXT -3336 976 Left 2 !.param T_1= {1/fsw_1}
TEXT -3336 1008 Left 2 !.param TON_1={0.5*T_1-Tdead1}
TEXT -3336 1040 Left 2 !.param TDelay_1 = {T_1/2}
TEXT -376 992 Left 2 !.param T_2= {1/fsw_2}
TEXT -376 1024 Left 2 !.param TON_2={0.5*T_2-Tdead2}
TEXT -376 1056 Left 2 !.param TDelay_2 = {T_2/2}
TEXT -376 928 Left 2 !.param fsw_2=99.32k
TEXT -3336 1072 Left 2 !.param HB_mode=0
TEXT -3336 1104 Left 2 !.param FB_mode=1
TEXT -5120 736 Left 2 !.model ID D(Ron=0 Roff=10Meg Vfdw=0)
TEXT -1616 1424 Left 4 ;POWER BUDGET
TEXT -4800 336 Left 2 ;CURRENT LIMITER
TEXT -4640 1640 Left 2 ;First stage full bridge
TEXT -2888 1640 Left 2 ;First stage resonant tank and transformer
TEXT -472 1624 Left 2 ;First stage output diode bridge and Cout
TEXT -4680 2296 Left 2 ;Second stage full bridge
TEXT -2936 2272 Left 2 ;Second stage resonant tank and transformer
TEXT -472 2264 Left 2 ;Second stage output diode bridge and Cout
TEXT -4056 1864 Left 2 !.meas PT1_mean AVG V(PT1) FROM {Tend-deltaMeas} TO {Tend}
TEXT -4056 1912 Left 2 !.meas PT2_mean AVG V(PT2) FROM {Tend-deltaMeas} TO {Tend}
TEXT -4056 1960 Left 2 !.meas PT3_mean AVG V(PT3) FROM {Tend-deltaMeas} TO {Tend}
TEXT -4056 2008 Left 2 !.meas PT4_mean AVG V(PT4) FROM {Tend-deltaMeas} TO {Tend}
TEXT -4064 2528 Left 2 !.meas PT5_mean AVG V(PT5) FROM {Tend-deltaMeas} TO {Tend}
TEXT -4064 2576 Left 2 !.meas PT6_mean AVG V(PT6) FROM {Tend-deltaMeas} TO {Tend}
TEXT -4064 2624 Left 2 !.meas PT7_mean AVG V(PT7) FROM {Tend-deltaMeas} TO {Tend}
TEXT -4064 2672 Left 2 !.meas PT8_mean AVG V(PT8) FROM {Tend-deltaMeas} TO {Tend}
TEXT -2760 1856 Left 2 !.meas PCr1_mean AVG V(PCr1) FROM {Tend-deltaMeas} TO {Tend}
TEXT -2720 2496 Left 2 !.meas PCr2_mean AVG V(PCr2) FROM {Tend-deltaMeas} TO {Tend}
TEXT -32 1856 Left 2 !.meas PD1_mean AVG V(PD1) FROM {Tend-deltaMeas} TO {Tend}
TEXT -32 1904 Left 2 !.meas PD2_mean AVG V(PD2) FROM {Tend-deltaMeas} TO {Tend}
TEXT 352 2512 Left 2 !.meas PD3_mean AVG V(PD3) FROM {Tend-deltaMeas} TO {Tend}
TEXT 352 2560 Left 2 !.meas PD4_mean AVG V(PD4) FROM {Tend-deltaMeas} TO {Tend}
TEXT 352 2608 Left 2 !.meas PD5_mean AVG V(PD5) FROM {Tend-deltaMeas} TO {Tend}
TEXT 352 2656 Left 2 !.meas PD6_mean AVG V(PD6) FROM {Tend-deltaMeas} TO {Tend}
TEXT 1032 1848 Left 2 !.meas PClink_mean AVG V(PClink) FROM {Tend-deltaMeas} TO {Tend}
TEXT 1224 2560 Left 2 !.meas PCout_mean AVG V(PCout) FROM {Tend-deltaMeas} TO {Tend}
TEXT 432 3016 Left 2 !.meas Pout_mean AVG V(Pout) FROM {Tend-deltaMeas} TO {Tend}
TEXT 1488 3008 Left 2 !.meas Pin_mean AVG V(Pin) FROM {Tend-deltaMeas} TO {Tend}
TEXT -3336 944 Left 2 !.param Tdead1=100ns
TEXT -376 960 Left 2 !.param Tdead2=100ns
TEXT -1888 1040 Left 2 !.tran 0 {Tend} 0m
TEXT -1888 1008 Left 2 !.param Tend=7ms
TEXT -1888 1088 Left 2 !.param FasterSimulation=1
TEXT 816 2824 Left 4 ;POWER MEASURES OF INTEREST
TEXT 440 3328 Left 2 !.meas PDP1_mean AVG V(PDP1) FROM {Tend-deltaMeas} TO {Tend}
TEXT 1496 3320 Left 2 !.meas PDP2_mean AVG V(PDP2) FROM {Tend-deltaMeas} TO {Tend}
TEXT 440 3632 Left 2 !.meas PoutStg1_mean AVG V(PoutStg1) FROM {Tend-deltaMeas} TO {Tend}
TEXT 1496 3624 Left 2 !.meas PoutStg2_mean AVG V(PoutStg2) FROM {Tend-deltaMeas} TO {Tend}
TEXT -1888 976 Left 2 !.param deltaMeas=2ms
TEXT -1576 976 Left 2 ;Defines average and rms time span for coherent sampling
TEXT 368 3904 Left 2 !.meas PLink_mean AVG V(PLink) FROM {Tend-deltaMeas} TO {Tend}
TEXT -4520 2928 Left 2 ;VOLTAGE STRESSES 1st STAGE
TEXT -4760 3024 Left 2 !.meas MAX_Vds_1 MAX V(in,V1) FROM {Tend-deltaMeasMaxs} TO {Tend}
TEXT -4760 3064 Left 2 !.meas MIN_Vds_1 MIN V(in,V1) FROM {Tend-deltaMeasMaxs} TO {Tend}
TEXT -4768 3200 Left 2 !.meas MAX_VTrans_1 MAX V(V1,V6) FROM {Tend-deltaMeasMaxs} TO {Tend}
TEXT -4768 3240 Left 2 !.meas MIN_VTrans_1 MIN V(V1,V6) FROM {Tend-deltaMeasMaxs} TO {Tend}
TEXT -4768 3384 Left 2 !.meas MAX_VCr_1 MAX V(V5,V6) FROM {Tend-deltaMeasMaxs} TO {Tend}
TEXT -4768 3424 Left 2 !.meas MIN_VCr_1 MIN V(V5,V6) FROM {Tend-deltaMeasMaxs} TO {Tend}
TEXT -4768 3584 Left 2 !.meas MAX_VD_1 MAX V(V9,V11) FROM {Tend-deltaMeasMaxs} TO {Tend}
TEXT -4768 3624 Left 2 !.meas MIN_VD_1 MIN V(V9,V11) FROM {Tend-deltaMeasMaxs} TO {Tend}
TEXT -4776 3808 Left 2 !.meas MAX_VCLink_1 MAX V(V11,in) FROM {Tend-deltaMeasMaxs} TO {Tend}
TEXT -4776 3848 Left 2 !.meas MIN_VCLink_1 MIN V(V11,in) FROM {Tend-deltaMeasMaxs} TO {Tend}
TEXT -2240 3008 Left 2 !.meas MAX_Vds_2 MAX V(V11,V13) FROM {Tend-deltaMeasMaxs} TO {Tend}
TEXT -2240 3048 Left 2 !.meas MIN_Vds_2 MIN V(V11,V13) FROM {Tend-deltaMeasMaxs} TO {Tend}
TEXT -2240 3184 Left 2 !.meas MAX_VTrans_2 MAX V(V13,V18) FROM {Tend-deltaMeasMaxs} TO {Tend}
TEXT -2240 3224 Left 2 !.meas MIN_VTrans_2 MIN V(V13,V18) FROM {Tend-deltaMeasMaxs} TO {Tend}
TEXT -2240 3368 Left 2 !.meas MAX_VCr_2 MAX V(V17,V18) FROM {Tend-deltaMeasMaxs} TO {Tend}
TEXT -2240 3408 Left 2 !.meas MIN_VCr_2 MIN V(V17,V18) FROM {Tend-deltaMeasMaxs} TO {Tend}
TEXT -2240 3576 Left 2 !.meas MAX_VD_2 MAX V(V21,out) FROM {Tend-deltaMeasMaxs} TO {Tend}
TEXT -2240 3616 Left 2 !.meas MIN_VD_2 MIN V(V21,out) FROM {Tend-deltaMeasMaxs} TO {Tend}
TEXT -2240 3792 Left 2 !.meas MAX_VCout_2 MAX V(V24,V11) FROM {Tend-deltaMeasMaxs} TO {Tend}
TEXT -2240 3832 Left 2 !.meas MIN_VCout_2 MIN V(V24,V11) FROM {Tend-deltaMeasMaxs} TO {Tend}
TEXT -1888 944 Left 2 !.param deltaMeasMaxs=20us
TEXT -1520 944 Left 2 ;Defines max and min measurements time span
TEXT -3248 2928 Left 2 ;CURRENT STRESSES 1st STAGE
TEXT -3496 3016 Left 2 !.meas MAX_Ids_1 MAX I(MeasID1) FROM {Tend-deltaMeasMaxs} TO {Tend}
TEXT -3496 3056 Left 2 !.meas MIN_Ids_1 MIN I(MeasID1) FROM {Tend-deltaMeasMaxs} TO {Tend}
TEXT -3496 3096 Left 2 !.meas RMS_Ids_1 RMS I(MeasID1) FROM {Tend-deltaMeas} TO {Tend}
TEXT -3496 3192 Left 2 !.meas MAX_ITrans_1 MAX I(Lk11) FROM {Tend-deltaMeasMaxs} TO {Tend}
TEXT -3496 3232 Left 2 !.meas MIN_ITrans_1 MIN I(Lk11) FROM {Tend-deltaMeasMaxs} TO {Tend}
TEXT -3496 3272 Left 2 !.meas RMS_ITrans_1 RMS I(Lk11) FROM {Tend-deltaMeas} TO {Tend}
TEXT -3488 3368 Left 2 !.meas MAX_ICr_1 MAX I(Lk11) FROM {Tend-deltaMeasMaxs} TO {Tend}
TEXT -3488 3408 Left 2 !.meas MIN_ICr_1 MIN I(Lk11) FROM {Tend-deltaMeasMaxs} TO {Tend}
TEXT -3488 3448 Left 2 !.meas RMS_ICr_1 RMS I(Lk11) FROM {Tend-deltaMeas} TO {Tend}
TEXT -3488 3576 Left 2 !.meas MAX_ID_1 MAX I(D1) FROM {Tend-deltaMeasMaxs} TO {Tend}
TEXT -3488 3616 Left 2 !.meas MIN_ID_1 MIN I(D1) FROM {Tend-deltaMeasMaxs} TO {Tend}
TEXT -3488 3656 Left 2 !.meas RMS_ID_1 RMS I(D1) FROM {Tend-deltaMeas} TO {Tend}
TEXT -3488 3800 Left 2 !.meas MAX_ICLink_1 MAX I(CLink) FROM {Tend-deltaMeasMaxs} TO {Tend}
TEXT -3488 3840 Left 2 !.meas MIN_ICLink_1 MIN I(CLink) FROM {Tend-deltaMeasMaxs} TO {Tend}
TEXT -3488 3880 Left 2 !.meas RMS_ICLink_1 RMS I(CLink) FROM {Tend-deltaMeas} TO {Tend}
TEXT -1968 2928 Left 2 ;VOLTAGE STRESSES 2nd STAGE
TEXT -696 2928 Left 2 ;CURRENT STRESSES 2nd STAGE
TEXT -960 3000 Left 2 !.meas MAX_Ids_2 MAX I(MeasID5) FROM {Tend-deltaMeasMaxs} TO {Tend}
TEXT -960 3040 Left 2 !.meas MIN_Ids_2 MIN I(MeasID5) FROM {Tend-deltaMeasMaxs} TO {Tend}
TEXT -960 3080 Left 2 !.meas RMS_Ids_2 RMS I(MeasID5) FROM {Tend-deltaMeas} TO {Tend}
TEXT -960 3176 Left 2 !.meas MAX_ITrans_2 MAX I(Lk12) FROM {Tend-deltaMeasMaxs} TO {Tend}
TEXT -960 3216 Left 2 !.meas MIN_ITrans_2 MIN I(Lk12) FROM {Tend-deltaMeasMaxs} TO {Tend}
TEXT -960 3256 Left 2 !.meas RMS_ITrans_2 RMS I(Lk12) FROM {Tend-deltaMeas} TO {Tend}
TEXT -952 3352 Left 2 !.meas MAX_ICr_2 MAX I(Lk12) FROM {Tend-deltaMeasMaxs} TO {Tend}
TEXT -952 3392 Left 2 !.meas MIN_ICr_2 MIN I(Lk12) FROM {Tend-deltaMeasMaxs} TO {Tend}
TEXT -952 3432 Left 2 !.meas RMS_ICr_2 RMS I(Lk12) FROM {Tend-deltaMeas} TO {Tend}
TEXT -952 3560 Left 2 !.meas MAX_ID_2 MAX I(D3) FROM {Tend-deltaMeasMaxs} TO {Tend}
TEXT -952 3600 Left 2 !.meas MIN_ID_2 MIN I(D3) FROM {Tend-deltaMeasMaxs} TO {Tend}
TEXT -952 3640 Left 2 !.meas RMS_ID_2 RMS I(D3) FROM {Tend-deltaMeas} TO {Tend}
TEXT -952 3784 Left 2 !.meas MAX_ICout_2 MAX I(Cout) FROM {Tend-deltaMeasMaxs} TO {Tend}
TEXT -952 3824 Left 2 !.meas MIN_ICout_2 MIN I(Cout) FROM {Tend-deltaMeasMaxs} TO {Tend}
TEXT -952 3864 Left 2 !.meas RMS_ICout_2 RMS I(Cout) FROM {Tend-deltaMeas} TO {Tend}
TEXT -1888 1128 Left 2 !.options Gmin = {1e-12 + FasterSimulation*9e-12 + FasterSimulationx2*5e-12}
TEXT -1888 1168 Left 2 !.options Abstol = {1e-12 + FasterSimulation*9e-12 + FasterSimulationx2*5e-12}
TEXT -1888 1208 Left 2 !.options Reltol = {0.001 + FasterSimulation*0.009 + FasterSimulationx2*0.005}
TEXT -1472 1088 Left 2 !.param FasterSimulationx2=0
TEXT -4728 1288 Left 2 !.inc C:\\Users\\feder\\Documents\\LTspice\\AUTOMOTIVE_GRADE_ULTRAFAST_DIODES_V7.lib
TEXT -2520 280 Left 2 !k1 Lideal11 Lideal12 Lideal13 1
TEXT -1680 888 Left 4 ;SIMULATION PARAMETERS
TEXT -2696 2816 Left 4 ;COMPONENTS STRESS
TEXT -3408 856 Left 4 ;FIRST BRIDGE SWITCHING
TEXT -456 872 Left 4 ;SECOND BRIDGE SWITCHING
TEXT -4416 1144 Left 4 ;LIBRARIES
TEXT -3136 -1472 Left 4 ;DOWELL-WOJDA's MODEL EQUATIONS IMPLEMENTATION
TEXT -4968 -1008 Left 2 !.param N1_1 = 7
TEXT -4968 -944 Left 2 !.param TotalStrands1_1 = 1200
TEXT -4968 -792 Left 2 !.param R_one_wire1_1 = {copper*1.1*N1_1*pi*CoreDiam1/(AreaWire1_1/10000)}
TEXT -4080 -1240 Left 2 !.param CoreDiam1 = 0.0193
TEXT -2848 -1344 Left 2 !.param copper = 1.77e-8
TEXT -2536 -1344 Left 2 ;Copper resistivity
TEXT -3720 -1240 Left 2 ;Magnetic path area
TEXT -4720 -1008 Left 2 ;Number of turns of primary winding
TEXT -4552 -944 Left 2 ;Number of strands in magnetic wire
TEXT -4968 -760 Left 2 !.param R_dc1_1 = {R_one_wire1_1/TotalStrands1_1}
TEXT -4968 -1040 Left 2 !.param D_AWG1_1 = 0.079
TEXT -4608 -1040 Left 2 ;AWG diameter in mm
TEXT -4968 -1072 Left 2 !.param FF1_1 = 0.6
TEXT -4712 -1072 Left 2 ;Fill factor of magnetic wire
TEXT -4968 -728 Left 2 !.param porosity1_1 = 2*{sqrt(FF1_1)}/sqrt(pi)
TEXT -4968 -656 Left 2 !.param delta1_1 = ((pi/4)**0.75)*{(D_AWG1_1/skin_depth1)*sqrt(porosity1_1)}
TEXT -4968 -624 Left 2 !.param Nequiv1_1 = {Intrinsic_Layers1_1*N_layers1_1*sqrt(TotalStrands1_1/TotalBundles1_1)}
TEXT -4968 -976 Left 2 !.param AreaWire1_1 = 0.0487e-3
TEXT -4536 -976 Left 2 ;Bare wire area in cm2
TEXT -4968 -912 Left 2 !.param TotalBundles1_1 = 1
TEXT -4968 -880 Left 2 !.param Intrinsic_Layers1_1 = 1
TEXT -4552 -912 Left 2 ;When the total strands are too much, we have several magnetic wires
TEXT -4552 -880 Left 2 ;The bundle of magnetic wires intrinsically is layered as its piled
TEXT -4968 -848 Left 2 !.param N_layers1_1 =2
TEXT -4624 -848 Left 2 ;Numbers of layers for the winding
TEXT -4968 -576 Left 2 !.param A1_1 = { ( sinh(2*delta1_1)+sin(2*delta1_1) )/( cosh(2*delta1_1)-cos(2*delta1_1) ) }
TEXT -4968 -544 Left 2 !.param B1_1 = { ( sinh(delta1_1)-sin(delta1_1) )/( cosh(delta1_1)+cos(delta1_1) ) }
TEXT -4968 -496 Left 2 !.param k11 = { delta1_1*( A1_1 + B1_1*2*(Nequiv1_1**2-1)/3 ) }
TEXT -5320 -1352 Left 3 ;Global properties
TEXT -5360 -960 Left 3 ;Winding properties
TEXT -5304 -1208 Left 3 ;Stage properties
TEXT -3664 -1016 Left 2 !.param N1_2 = 39
TEXT -3664 -952 Left 2 !.param TotalStrands1_2 = 300
TEXT -3664 -800 Left 2 !.param R_one_wire1_2 = {copper*1.1*N1_2*pi*CoreDiam1/(AreaWire1_2/10000)}
TEXT -3416 -1016 Left 2 ;Number of turns of secondary winding
TEXT -3248 -952 Left 2 ;Number of strands in magnetic wire
TEXT -3664 -768 Left 2 !.param R_dc1_2 = {(R_one_wire1_2/TotalStrands1_2)/2}
TEXT -3664 -1048 Left 2 !.param D_AWG1_2 = 0.079
TEXT -3304 -1048 Left 2 ;AWG diameter in mm
TEXT -3664 -1080 Left 2 !.param FF1_2 = 0.6
TEXT -3408 -1080 Left 2 ;Fill factor of magnetic wire
TEXT -3664 -736 Left 2 !.param porosity1_2 = 2*{sqrt(FF1_2)}/sqrt(pi)
TEXT -3664 -664 Left 2 !.param delta1_2 = ((pi/4)**0.75)*{(D_AWG1_2/skin_depth1)*sqrt(porosity1_2)}
TEXT -3664 -632 Left 2 !.param Nequiv1_2 = {Intrinsic_Layers1_2*N_layers1_2*sqrt(TotalStrands1_2/TotalBundles1_2)}
TEXT -3664 -984 Left 2 !.param AreaWire1_2 = 0.0487e-3
TEXT -3232 -984 Left 2 ;Bare wire area in cm2
TEXT -3664 -920 Left 2 !.param TotalBundles1_2 = 1
TEXT -3664 -888 Left 2 !.param Intrinsic_Layers1_2 = 1
TEXT -3248 -920 Left 2 ;When the total strands are too much, we have several magnetic wires
TEXT -3248 -888 Left 2 ;The bundle of magnetic wires intrinsically is layered as its piled
TEXT -3664 -856 Left 2 !.param N_layers1_2 = 5
TEXT -3320 -856 Left 2 ;Numbers of layers for the winding
TEXT -3664 -584 Left 2 !.param A1_2 = { ( sinh(2*delta1_2)+sin(2*delta1_2) )/( cosh(2*delta1_2)-cos(2*delta1_2) ) }
TEXT -3664 -552 Left 2 !.param B1_2 = { ( sinh(delta1_2)-sin(delta1_2) )/( cosh(delta1_2)+cos(delta1_2) ) }
TEXT -3664 -504 Left 2 !.param k12 = { delta1_2*( A1_2 + B1_2*2*(Nequiv1_2**2-1)/3 ) }
TEXT -2960 -768 Left 2 ;Divided by 2 as each winding takes half the copper
TEXT -4080 -1216 Left 2 !.param skin_depth1 = 10*6.62/{sqrt(fsw_1)}
TEXT -2272 -1016 Left 2 !.param N2_1 = 14
TEXT -2272 -952 Left 2 !.param TotalStrands2_1 = 430
TEXT -2272 -800 Left 2 !.param R_one_wire2_1 = {copper*1.1*N2_1*pi*CoreDiam2/(AreaWire2_1/10000)}
TEXT -2024 -1016 Left 2 ;Number of turns of first winding
TEXT -1856 -952 Left 2 ;Number of strands in magnetic wire
TEXT -2272 -768 Left 2 !.param R_dc2_1 = {R_one_wire2_1/TotalStrands2_1}
TEXT -2272 -1048 Left 2 !.param D_AWG2_1 = 0.079
TEXT -1912 -1048 Left 2 ;AWG diameter in mm
TEXT -2272 -1080 Left 2 !.param FF2_1 = 0.6
TEXT -2016 -1080 Left 2 ;Fill factor of magnetic wire
TEXT -2272 -736 Left 2 !.param porosity2_1 = 2*{sqrt(FF2_1)}/sqrt(pi)
TEXT -2272 -664 Left 2 !.param delta2_1 = ((pi/4)**0.75)*{(D_AWG2_1/skin_depth2)*sqrt(porosity2_1)}
TEXT -2272 -632 Left 2 !.param Nequiv2_1 = {Intrinsic_Layers2_1*N_layers2_1*sqrt(TotalStrands2_1/TotalBundles2_1)}
TEXT -2272 -984 Left 2 !.param AreaWire2_1 = 0.0487e-3
TEXT -1840 -984 Left 2 ;Bare wire area in cm2
TEXT -2272 -920 Left 2 !.param TotalBundles2_1 = 1
TEXT -2272 -888 Left 2 !.param Intrinsic_Layers2_1 = 1
TEXT -1856 -920 Left 2 ;When the total strands are too much, we have several magnetic wires
TEXT -1856 -888 Left 2 ;The bundle of magnetic wires intrinsically is layered as its piled
TEXT -2272 -856 Left 2 !.param N_layers2_1 = 3
TEXT -1928 -856 Left 2 ;Numbers of layers for the winding
TEXT -2272 -584 Left 2 !.param A2_1 = { ( sinh(2*delta2_1)+sin(2*delta2_1) )/( cosh(2*delta2_1)-cos(2*delta2_1) ) }
TEXT -2272 -552 Left 2 !.param B2_1 = { ( sinh(delta2_1)-sin(delta2_1) )/( cosh(delta2_1)+cos(delta2_1) ) }
TEXT -2272 -504 Left 2 !.param k21 =  { delta2_1*( A2_1 + B2_1*2*(Nequiv2_1**2-1)/3 ) }
TEXT -1464 -1232 Left 2 !.param CoreDiam2 = 0.0193
TEXT -1104 -1232 Left 2 ;Magnetic path area
TEXT -1464 -1208 Left 2 !.param skin_depth2 = 10*6.62/{sqrt(fsw_2)}
TEXT -848 -1024 Left 2 !.param N2_2 = 20
TEXT -848 -960 Left 2 !.param TotalStrands2_2 = 147
TEXT -848 -808 Left 2 !.param R_one_wire2_2 = {copper*1.1*N2_2*pi*CoreDiam2/(AreaWire2_2/10000)}
TEXT -600 -1024 Left 2 ;Number of turns of second winding
TEXT -432 -960 Left 2 ;Number of strands in magnetic wire
TEXT -848 -776 Left 2 !.param R_dc2_2 = {R_one_wire2_2/TotalStrands2_2}
TEXT -848 -1056 Left 2 !.param D_AWG2_2 = 0.079
TEXT -488 -1056 Left 2 ;AWG diameter in mm
TEXT -848 -1088 Left 2 !.param FF2_2 = 0.6
TEXT -592 -1088 Left 2 ;Fill factor of magnetic wire
TEXT -848 -744 Left 2 !.param porosity2_2 = 2*{sqrt(FF2_2)}/sqrt(pi)
TEXT -848 -672 Left 2 !.param delta2_2 = ((pi/4)**0.75)*{(D_AWG2_2/skin_depth2)*sqrt(porosity2_2)}
TEXT -848 -640 Left 2 !.param Nequiv2_2 = {Intrinsic_Layers2_2*N_layers2_2*sqrt(TotalStrands2_2/TotalBundles2_2)}
TEXT -848 -992 Left 2 !.param AreaWire2_2 = 0.0487e-3
TEXT -416 -992 Left 2 ;Bare wire area in cm2
TEXT -848 -928 Left 2 !.param TotalBundles2_2 = 1
TEXT -848 -896 Left 2 !.param Intrinsic_Layers2_2 = 1
TEXT -432 -928 Left 2 ;When the total strands are too much, we have several magnetic wires
TEXT -432 -896 Left 2 ;The bundle of magnetic wires intrinsically is layered as its piled
TEXT -848 -864 Left 2 !.param N_layers2_2 = 3
TEXT -504 -864 Left 2 ;Numbers of layers for the winding
TEXT -848 -592 Left 2 !.param A2_2 = { ( sinh(2*delta2_2)+sin(2*delta2_2) )/( cosh(2*delta2_2)-cos(2*delta2_2) ) }
TEXT -848 -560 Left 2 !.param B2_2 = { ( sinh(delta2_2)-sin(delta2_2) )/( cosh(delta2_2)+cos(delta2_2) ) }
TEXT -848 -512 Left 2 !.param k22 = { delta2_2*( A2_2 + B2_2*2*(Nequiv2_2**2-1)/3 ) }
TEXT -1616 1848 Left 2 !.meas PRs11_mean AVG V(PRs11) FROM {Tend-deltaMeas} TO {Tend}
TEXT -1616 1896 Left 2 !.meas PRs12_mean AVG V(PRs12) FROM {Tend-deltaMeas} TO {Tend}
TEXT -1616 1944 Left 2 !.meas PRs13_mean AVG V(PRs13) FROM {Tend-deltaMeas} TO {Tend}
TEXT -1616 1992 Left 2 !.meas Pc1_mean AVG V(PRc1) FROM {Tend-deltaMeas} TO {Tend}
TEXT -1528 2480 Left 2 !.meas PRs21_mean AVG V(PRs21) FROM {Tend-deltaMeas} TO {Tend}
TEXT -1528 2528 Left 2 !.meas PRs22_mean AVG V(PRs22) FROM {Tend-deltaMeas} TO {Tend}
TEXT -1528 2576 Left 2 !.meas Pc2_mean AVG V(PRc2) FROM {Tend-deltaMeas} TO {Tend}
TEXT -4080 -1192 Left 2 !.param Vol1 = 3.56e-5
TEXT -3784 -1192 Left 2 ;Set volume, in m3
TEXT -1464 -1184 Left 2 !.param Vol2 = 3.56e-5
TEXT -1168 -1184 Left 2 ;Set volume, in m3
TEXT -5432 -608 Left 3 ;Wojda/Dowell's model
TEXT 1584 -1312 Left 2 !.param pvsin1 = 108960
TEXT 1896 -1312 Left 2 ;Power density loss [W/m3] at T=40°C, fb=100kHz, Bm=100mT
TEXT 1584 -1280 Left 2 !.param fb1 = 100000
TEXT 1584 -1248 Left 2 !.param Bm1 = 0.1
TEXT 1584 -1216 Left 2 !.param alpha1 = 1.4768
TEXT 1896 -1216 Left 2 ;First Steinmetz coefficient for pvsin1
TEXT 1584 -1184 Left 2 !.param beta1 = 2.5003
TEXT 1896 -1184 Left 2 ;Second Steinmetz coefficient for pvsin1
TEXT -4080 -1168 Left 2 !.param AreaCore1 = 0.00028
TEXT -3712 -1168 Left 2 ;Core area in m2
TEXT -1464 -1160 Left 2 !.param AreaCore2 = 0.00028
TEXT -1088 -1160 Left 2 ;Core area in m2
TEXT 1560 -872 Left 2 !.param pvsin2 = 108960
TEXT 1872 -872 Left 2 ;Power density loss [W/m3] at T=40°C, fb=100kHz, Bm=100mT
TEXT 1560 -840 Left 2 !.param fb2 = 100000
TEXT 1560 -808 Left 2 !.param Bm2 = 0.1
TEXT 1560 -776 Left 2 !.param alpha2 = 1.4768
TEXT 1872 -776 Left 2 ;First Steinmetz coefficient for pvsin2
TEXT 1560 -744 Left 2 !.param beta2 = 2.5003
TEXT 1872 -744 Left 2 ;Second Steinmetz coefficient for pvsin2
TEXT 1944 -1480 Left 4 ;CORE LOSSES MODELLING
TEXT -80 928 Left 2 ;99.32k resonance
TEXT -3032 912 Left 2 ;102.8k resonance
TEXT -1888 1288 Left 2 !.options cshunt=1e-14
TEXT -1888 1328 Left 2 !.options gshunt=1e-14
TEXT -1624 1008 Left 2 ;Simulation time
TEXT -1888 1248 Left 2 !.options Trtol = 5
TEXT -944 2056 Left 2 ;Actually considering directly power estimation, \nif power at equivalent resistor is of interest, change to:\nV=I(Rc2)*V(V15,V18)
TEXT -960 1432 Left 2 ;Actually considering directly power estimation, \nif power at equivalent resistor is of interest, change to:\nV=I(Rc1)*V(V3,V6)
RECTANGLE Normal -48 4176 -4928 2752
RECTANGLE Normal 2304 4176 -48 2752
RECTANGLE Normal 2304 1376 -4928 2752
RECTANGLE Normal -3568 1040 -4928 1376
RECTANGLE Normal 496 -1136 -5040 -432
RECTANGLE Normal -2384 -1280 -5040 -1136
RECTANGLE Normal 496 -1136 -2384 -1280
RECTANGLE Normal 496 -1408 -5040 -1280
RECTANGLE Normal 3344 -432 496 -1408
RECTANGLE Normal -784 848 -2032 1376 2
RECTANGLE Normal -784 848 -2032 1376
